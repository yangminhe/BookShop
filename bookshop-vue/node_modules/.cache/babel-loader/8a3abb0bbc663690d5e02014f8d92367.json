{"remainingRequest":"/Volumes/Application/bookshop/bookshop-vue/node_modules/babel-loader/lib/index.js!/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/Application/bookshop/bookshop-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Application/bookshop/bookshop-vue/src/fore/ProductPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Application/bookshop/bookshop-vue/src/fore/ProductPage.vue","mtime":1664395825117},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZm9ybWF0RGF0ZSBhcyBfZm9ybWF0RGF0ZSB9IGZyb20gJy4uL3N0b3JlL2Zvcm1hdERhdGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlByb2R1Y3RQYWdlIiwKICBmaWx0ZXJzOiB7CiAgICBmb3JtYXREYXRlOiBmdW5jdGlvbiBmb3JtYXREYXRlKHRpbWUpIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTsKICAgICAgcmV0dXJuIF9mb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tJyk7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXJpOiAncHJvZHVjdCcsCiAgICAgIGJlYW46IFtdLAogICAgICByZXZpZXc6IFtdLAogICAgICBudW06IDEsCiAgICAgIGFjdGl2ZU5hbWVzOiBbJzEnXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgdmFyIHVybCA9IHRoaXMudXJpICsgIi8iICsgaWQ7CiAgICB0aGlzLmF4aW9zLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHZhciByZXN1bHQgPSByZXNwb25zZS5kYXRhOwogICAgICBfdGhpcy5iZWFuID0gcmVzdWx0LmRhdGEucHJvZHVjdDsKICAgICAgX3RoaXMucmV2aWV3ID0gcmVzdWx0LmRhdGEucmV2aWV3czsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQnV5OiBmdW5jdGlvbiBoYW5kbGVCdXkoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKCFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHBpZCA9IHRoaXMuYmVhbi5pZDsKICAgICAgICB2YXIgdXJsID0gImJ1eT9waWQ9IiArIHBpZCArICImbnVtPSIgKyB0aGlzLm51bTsKICAgICAgICB0aGlzLmF4aW9zLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICB2YXIgb2lpZCA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICcvY29uZmlybScsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgb2lpZDogb2lpZAogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUFkZDogZnVuY3Rpb24gaGFuZGxlQWRkKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmICghc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICB9CgogICAgICB2YXIgcGlkID0gdGhpcy5iZWFuLmlkOwogICAgICB2YXIgdXJsID0gImFkZENhcnQ/cGlkPSIgKyBwaWQgKyAiJm51bT0iICsgdGhpcy5udW07CiAgICAgIHRoaXMuYXhpb3MuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgaWYgKDIwMCA9PSByZXN1bHQuY29kZSkgewogICAgICAgICAgX3RoaXMzLiRtZXNzYWdlKCflt7LliqDlhaXotK3nianovaYnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ProductPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,SAAA,UAAA,IAAA,WAAA,QAAA,qBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,IADA,EACA;AACA,UAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA;AACA,aAAA,WAAA,CAAA,IAAA,EAAA,kBAAA,CAAA;AACA;AAJA,GAFA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,GAAA,EAAA,SADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA,EAHA;AAIA,MAAA,GAAA,EAAA,CAJA;AAKA,MAAA,WAAA,EAAA,CAAA,GAAA;AALA,KAAA;AAOA,GAhBA;AAiBA,EAAA,OAjBA,qBAiBA;AAAA;;AACA,QAAA,EAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,EAAA;AACA,QAAA,GAAA,GAAA,KAAA,GAAA,GAAA,GAAA,GAAA,EAAA;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,UAAA,MAAA,GAAA,QAAA,CAAA,IAAA;AACA,MAAA,KAAA,CAAA,IAAA,GAAA,MAAA,CAAA,IAAA,CAAA,OAAA;AACA,MAAA,KAAA,CAAA,MAAA,GAAA,MAAA,CAAA,IAAA,CAAA,OAAA;AACA,KALA;AAOA,GA3BA;AA4BA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AACA,UAAA,CAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,OAFA,MAEA;AACA,YAAA,GAAA,GAAA,KAAA,IAAA,CAAA,EAAA;AACA,YAAA,GAAA,GAAA,aAAA,GAAA,GAAA,OAAA,GAAA,KAAA,GAAA;AACA,aAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,cAAA,IAAA,GAAA,QAAA,CAAA,IAAA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA,UADA;AAEA,YAAA,KAAA,EAAA;AACA,cAAA,IAAA,EAAA;AADA;AAFA,WAAA;AAMA,SATA;AAWA;AACA,KAnBA;AAoBA,IAAA,SApBA,uBAoBA;AAAA;;AACA,UAAA,CAAA,cAAA,CAAA,OAAA,CAAA,MAAA,CAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA;;AACA,UAAA,GAAA,GAAA,KAAA,IAAA,CAAA,EAAA;AACA,UAAA,GAAA,GAAA,iBAAA,GAAA,GAAA,OAAA,GAAA,KAAA,GAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EACA,IADA,CACA,UAAA,QAAA,EAAA;AACA,YAAA,MAAA,GAAA,QAAA,CAAA,IAAA;;AACA,YAAA,OAAA,MAAA,CAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,QAAA;AACA;AACA,OANA;AAOA;AAjCA;AA5BA,CAAA","sourcesContent":["<template>\n    <div>\n    <el-row :gutter=\"40\" style=\"text-align: center\">\n        <el-col span=\"6\" :offset=\"6\">\n            <el-image :src=\"bean.image\"\n                      lazy=\"true\"\n                      fit=\"fill\"\n                      style=\"height: 368px;width: 260px\"/>\n        </el-col>\n        <el-col span=\"6\">\n            <h3>{{bean.name}}</h3>\n            <p style=\"color: #9d9d9d\">{{bean.author}}</p>\n            <h2 style=\"color: #fb4e44;\">￥{{bean.price}}</h2>\n            <el-tag type=\"success\">{{bean.discount}}折</el-tag>\n            <p>{{bean.publisher}}</p>\n            <el-input-number v-model=\"num\" :min=\"1\" :max=\"10\"/>\n            <p>库存：{{bean.stock}}件</p>\n            <el-button type=\"warning\" plain @click=\"handleAdd\">加入购物车</el-button>\n            <el-button type=\"danger\" @click=\"handleBuy\">立即购买</el-button>\n        </el-col>\n    </el-row>\n    <el-row style=\"text-align: center;margin-top: 50px\" >\n        <el-col span=\"12\" :offset=\"6\">\n            <el-collapse>\n                <el-collapse-item title=\"评论\" style=\"text-align: left\">\n                    <template slot=\"title\">\n                        <i class=\"el-icon-copy-document\"/>{{bean.reviewCount}}条书友评论\n                    </template>\n                    <el-card v-for=\"item in review\" :key=\"item.key\" >\n                        <el-tag>{{item.user.name}}</el-tag>\n                        <p>{{item.content}}</p>\n                        <el-tag type=\"info\" style=\"text-align: right\">{{item.createTime | formatDate}}</el-tag>\n                    </el-card>\n                </el-collapse-item>\n            </el-collapse>\n        </el-col>\n    </el-row>\n    </div>\n</template>\n\n<script>\n    import { formatDate } from '../store/formatDate'\n    export default {\n        name: \"ProductPage\",\n        filters: {\n            formatDate(time) {\n                let date = new Date(time);\n                return formatDate(date, 'yyyy-MM-dd hh:mm');\n            }\n        },\n        data(){\n            return{\n                uri:'product',\n                bean:[],\n                review:[],\n                num: 1,\n                activeNames: ['1']\n            }\n        },\n        created() {\n            let id = this.$route.query.id;\n            let url = this.uri + \"/\" + id;\n            this.axios.get(url)\n                .then(response => {\n                    let result = response.data;\n                    this.bean = result.data.product;\n                    this.review = result.data.reviews;\n                    }\n                )\n        },\n        methods:{\n            handleBuy(){\n                if (!sessionStorage.getItem('user')){\n                    this.$router.push('/login');\n                }else{\n                    let pid = this.bean.id;\n                    let url = \"buy?pid=\" + pid + \"&num=\" + this.num;\n                    this.axios.get(url)\n                        .then(response => {\n                            let oiid = response.data;\n                            this.$router.push({\n                                path: '/confirm',\n                                query:{\n                                    oiid: oiid\n                                }\n                            })\n                        })\n\n                }\n            },\n            handleAdd(){\n                if (!sessionStorage.getItem('user')){\n                    this.$router.push('/login');\n                }\n                let pid = this.bean.id;\n                let url = \"addCart?pid=\" + pid + \"&num=\" + this.num;\n                this.axios.get(url)\n                    .then(response => {\n                        let result= response.data;\n                        if(200==result.code) {\n                            this.$message('已加入购物车');\n                        }\n                        })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/fore"}]}