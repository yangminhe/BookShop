{"remainingRequest":"/Volumes/Application/bookshop/bookshop-vue/node_modules/babel-loader/lib/index.js!/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/Application/bookshop/bookshop-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Application/bookshop/bookshop-vue/src/admin/Category.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Application/bookshop/bookshop-vue/src/admin/Category.vue","mtime":1664395825109},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2F0ZWdvcnkiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cmk6ICdjYXRlZ29yaWVzJywKICAgICAgdG90YWw6IDAsCiAgICAgIHBhZ2VOdW06IDAsCiAgICAgIGNhdGVnb3J5OiBbXSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBmb3JtOiB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIG5hbWU6ICcnCiAgICAgIH0sCiAgICAgIGZpbGVMaXN0OiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxpc3QoMSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsaXN0OiBmdW5jdGlvbiBsaXN0KHBhZ2VOdW0pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB1cmwgPSB0aGlzLnVyaSArICI/cGFnZU51bT0iICsgcGFnZU51bTsKICAgICAgdGhpcy5heGlvcy5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmNhdGVnb3J5ID0gcmVzcG9uc2UuZGF0YS5jb250ZW50OwogICAgICAgIF90aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbEVsZW1lbnRzOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2VOdW0gPSB2YWw7CiAgICAgIHRoaXMubGlzdCh2YWwpOwogICAgfSwKICAgIGhhbmRsZU9wZW46IGZ1bmN0aW9uIGhhbmRsZU9wZW4oKSB7CiAgICAgIHRoaXMuZm9ybS5pZCA9ICcnOwogICAgICB0aGlzLmZvcm0ubmFtZSA9ICcnOwogICAgICB0aGlzLmZpbGVMaXN0ID0gW107CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uIGhhbmRsZUVkaXQoJGluZGV4LCByb3cpIHsKICAgICAgdGhpcy5mb3JtID0gcm93OwogICAgICB0aGlzLmZpbGVMaXN0ID0gW107CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZUZpbGU6IGZ1bmN0aW9uIGhhbmRsZUZpbGUocmVzcG9uc2UpIHsKICAgICAgdGhpcy5maWxlTGlzdC5wdXNoKHJlc3BvbnNlLmZpbGUpOwogICAgfSwKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgaGFuZGxlRXhjZWVkOiBmdW5jdGlvbiBoYW5kbGVFeGNlZWQoZmlsZXMpIHsKICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCJcdTY3MDBcdTU5MUFcdTRFMEFcdTRGMjAgIi5jb25jYXQoZmlsZXMubGVuZ3RoLCAiIFx1NEUyQVx1NjU4N1x1NEVGNiIpKTsKICAgIH0sCiAgICBoYW5kbGVDYW5jZWw6IGZ1bmN0aW9uIGhhbmRsZUNhbmNlbCgpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLiRyZWZbJ2Zvcm0nXS5yZXNldEZpZWxkcygpOwogICAgfSwKICAgIGhhbmRsZUFkZDogZnVuY3Rpb24gaGFuZGxlQWRkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ25hbWUnLCB0aGlzLmZvcm0ubmFtZSk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIHRoaXMuZmlsZUxpc3RbMF0pOwoKICAgICAgaWYgKHRoaXMuZm9ybS5pZCA9PT0gJycpIHsKICAgICAgICB0aGlzLmF4aW9zLnBvc3QodGhpcy51cmksIGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKDAgIT0gcmVzcG9uc2UuZGF0YS5sZW5ndGgpIHsKICAgICAgICAgICAgX3RoaXMyLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczIuaGFuZGxlQ3VycmVudENoYW5nZSgxKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdXJsID0gdGhpcy51cmkgKyAiLyIgKyB0aGlzLmZvcm0uaWQ7CiAgICAgICAgdGhpcy5heGlvcy5wdXQodXJsLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmICgwICE9IHJlc3BvbnNlLmRhdGEubGVuZ3RoKSB7CiAgICAgICAgICAgIF90aGlzMi5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICAgICAgX3RoaXMyLmhhbmRsZUN1cnJlbnRDaGFuZ2UoMSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVEZWxldGU6IGZ1bmN0aW9uIGhhbmRsZURlbGV0ZSgkaW5kZXgsIHJvdykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciB1cmwgPSB0aGlzLnVyaSArICIvIiArIHJvdy5pZDsKICAgICAgdGhpcy5heGlvcy5kZWxldGUodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmICgwID09PSByZXNwb25zZS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgX3RoaXMzLmNhdGVnb3J5LnNwbGljZSgkaW5kZXgsIDEpOwoKICAgICAgICAgIF90aGlzMy5oYW5kbGVDdXJyZW50Q2hhbmdlKDEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Category.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <div>\n            <el-dialog title=\"分类编辑\"\n                       :visible.sync=\"dialogFormVisible\"\n                       center\n                       width=\"20%\" >\n                <el-form ref=\"form\"\n                        :model=\"form\">\n                    <el-form-item>\n                        <el-tag v-model=\"form.id\"\n                                v-show=\"false\"/>\n                    </el-form-item>\n                    <el-form-item label=\"分类图片\">\n                        <el-upload\n                                action=\"\"\n                                auto-upload=\"false\"\n                                :http-request=\"handleFile\"\n                                :multiple=\"false\"\n                                :limit=\"1\"\n                                :on-exceed=\"handleExceed\"\n                                :file-list=\"fileList\">\n                            <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n                            <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\n                        </el-upload>\n                    </el-form-item>\n                    <el-form-item label=\"分类名称\">\n                        <el-input v-model=\"form.name\"></el-input>\n                    </el-form-item>\n                </el-form>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button type=\"primary\" @click=\"handleAdd\">确 定</el-button>\n                    <el-button @click=\"handleCancel\">取 消</el-button>\n                </div>\n            </el-dialog>\n            <el-button\n                    type=\"primary\"\n                    icon=\"el-icon-circle-plus-outline\"\n                    style=\"margin-bottom: 30px\"\n                    @click=\"handleOpen\">新增分类\n            </el-button>\n        </div>\n        <div>\n            <el-table :data=\"category\">\n                <el-table-column\n                        prop=\"id\"\n                        label=\"分类ID\"/>\n                <el-table-column\n                        prop=\"name\"\n                        label=\"分类名称\"/>\n                <el-table-column\n                    prop=\"image\"\n                    label=\"分类图片\">\n                    <template slot-scope=\"scope\">\n                    <el-image\n                            style=\"width: 100px; height: 100px\"\n                            :src=\"scope.row.image\"\n                            fit=\"fill\"/>\n                    </template>\n                </el-table-column>\n                <el-table-column\n                        label=\"操作\">\n                    <template slot-scope=\"scope\">\n                        <el-button\n                                type=\"primary\"\n                                icon=\"el-icon-edit\"\n                                @click=\"handleEdit(scope.$index,scope.row)\">编辑\n                        </el-button>\n                        <el-button\n                                type=\"danger\"\n                                icon=\"el-icon-delete\"\n                                @click=\"handleDelete(scope.$index,scope.row)\">删除\n                        </el-button>\n                    </template>\n                </el-table-column>\n            </el-table>\n        </div>\n        <div>\n            <el-col :span=\"24\">\n                <el-pagination\n                        background\n                        layout=\"total,prev,pager,next\"\n                        :page-size=\"5\"\n                        :pager-count=\"5\"\n                        @current-change=\"handleCurrentChange\"\n                        :total=\"total\"\n                        :current-page=\"pageNum\"\n                />\n            </el-col>\n        </div>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"Category\",\n        data(){\n            return{\n                uri:'categories',\n                total:0,\n                pageNum:0,\n                category:[],\n                dialogFormVisible:false,\n                form:{\n                    id:'',\n                    name:''\n                },\n                fileList:[]\n            }\n        },\n\n        created() {\n            this.list(1);\n        },\n\n        methods: {\n            list(pageNum) {\n                let url = this.uri + \"?pageNum=\" + pageNum;\n                this.axios.get(url)\n                    .then(response => {\n                    this.category = response.data.content;\n                    this.total = response.data.totalElements;\n                })\n            },\n            handleCurrentChange(val) {\n                this.pageNum = val;\n                this.list(val);\n            },\n            handleOpen(){\n                this.form.id = '';\n                this.form.name = '';\n                this.fileList = [];\n                this.dialogFormVisible = true;\n            },\n            handleEdit($index,row){\n                this.form = row;\n                this.fileList = [];\n                this.dialogFormVisible = true;\n            },\n            handleFile(response) {\n                this.fileList.push(response.file)\n            },\n            // eslint-disable-next-line no-unused-vars\n            handleExceed(files) {\n                this.$message.warning(`最多上传 ${files.length} 个文件`)\n            },\n            handleCancel(){\n                this.dialogFormVisible = false;\n                this.$ref['form'].resetFields();\n            },\n            handleAdd(){\n                let formData = new FormData();\n                formData.append('name', this.form.name);\n                formData.append('file', this.fileList[0]);\n                if(this.form.id === ''){\n                    this.axios.post(this.uri, formData)\n                        .then(response => {\n                            if(0 != response.data.length) {\n                                this.dialogFormVisible = false;\n                                this.handleCurrentChange(1);\n                            }\n                        })\n                }else{\n                    let url= this.uri + \"/\" + this.form.id;\n                    this.axios.put(url, formData)\n                        .then(response => {\n                            if(0 != response.data.length) {\n                                this.dialogFormVisible = false;\n                                this.handleCurrentChange(1);\n                            }\n                        })\n                }\n            },\n            handleDelete($index,row){\n                let url = this.uri + \"/\" + row.id;\n                this.axios.delete(url)\n                    .then(response => {\n                    if( 0 === response.data.length ) {\n                        this.category.splice($index, 1);\n                        this.handleCurrentChange(1);\n                    }\n                });\n            }\n        }\n    }\n</script>\n\n<style scoped>\n</style>"],"sourceRoot":"src/admin"}]}