{"remainingRequest":"/Volumes/Application/bookshop/bookshop-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Application/bookshop/bookshop-vue/src/fore/ProductPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Application/bookshop/bookshop-vue/src/fore/ProductPage.vue","mtime":1664395825117},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICcuLi9zdG9yZS9mb3JtYXREYXRlJwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAiUHJvZHVjdFBhZ2UiLAogICAgZmlsdGVyczogewogICAgICAgIGZvcm1hdERhdGUodGltZSkgewogICAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpOwogICAgICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShkYXRlLCAneXl5eS1NTS1kZCBoaDptbScpOwogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICB1cmk6J3Byb2R1Y3QnLAogICAgICAgICAgICBiZWFuOltdLAogICAgICAgICAgICByZXZpZXc6W10sCiAgICAgICAgICAgIG51bTogMSwKICAgICAgICAgICAgYWN0aXZlTmFtZXM6IFsnMSddCiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgbGV0IGlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICAgICAgbGV0IHVybCA9IHRoaXMudXJpICsgIi8iICsgaWQ7CiAgICAgICAgdGhpcy5heGlvcy5nZXQodXJsKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIHRoaXMuYmVhbiA9IHJlc3VsdC5kYXRhLnByb2R1Y3Q7CiAgICAgICAgICAgICAgICB0aGlzLnJldmlldyA9IHJlc3VsdC5kYXRhLnJldmlld3M7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICBoYW5kbGVCdXkoKXsKICAgICAgICAgICAgaWYgKCFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGxldCBwaWQgPSB0aGlzLmJlYW4uaWQ7CiAgICAgICAgICAgICAgICBsZXQgdXJsID0gImJ1eT9waWQ9IiArIHBpZCArICImbnVtPSIgKyB0aGlzLm51bTsKICAgICAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KHVybCkKICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvaWlkID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogJy9jb25maXJtJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5OnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvaWlkOiBvaWlkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGhhbmRsZUFkZCgpewogICAgICAgICAgICBpZiAoIXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSl7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHBpZCA9IHRoaXMuYmVhbi5pZDsKICAgICAgICAgICAgbGV0IHVybCA9ICJhZGRDYXJ0P3BpZD0iICsgcGlkICsgIiZudW09IiArIHRoaXMubnVtOwogICAgICAgICAgICB0aGlzLmF4aW9zLmdldCh1cmwpCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdD0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgICAgICBpZigyMDA9PXJlc3VsdC5jb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoJ+W3suWKoOWFpei0reeJqei9picpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["ProductPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductPage.vue","sourceRoot":"src/fore","sourcesContent":["<template>\n    <div>\n    <el-row :gutter=\"40\" style=\"text-align: center\">\n        <el-col span=\"6\" :offset=\"6\">\n            <el-image :src=\"bean.image\"\n                      lazy=\"true\"\n                      fit=\"fill\"\n                      style=\"height: 368px;width: 260px\"/>\n        </el-col>\n        <el-col span=\"6\">\n            <h3>{{bean.name}}</h3>\n            <p style=\"color: #9d9d9d\">{{bean.author}}</p>\n            <h2 style=\"color: #fb4e44;\">￥{{bean.price}}</h2>\n            <el-tag type=\"success\">{{bean.discount}}折</el-tag>\n            <p>{{bean.publisher}}</p>\n            <el-input-number v-model=\"num\" :min=\"1\" :max=\"10\"/>\n            <p>库存：{{bean.stock}}件</p>\n            <el-button type=\"warning\" plain @click=\"handleAdd\">加入购物车</el-button>\n            <el-button type=\"danger\" @click=\"handleBuy\">立即购买</el-button>\n        </el-col>\n    </el-row>\n    <el-row style=\"text-align: center;margin-top: 50px\" >\n        <el-col span=\"12\" :offset=\"6\">\n            <el-collapse>\n                <el-collapse-item title=\"评论\" style=\"text-align: left\">\n                    <template slot=\"title\">\n                        <i class=\"el-icon-copy-document\"/>{{bean.reviewCount}}条书友评论\n                    </template>\n                    <el-card v-for=\"item in review\" :key=\"item.key\" >\n                        <el-tag>{{item.user.name}}</el-tag>\n                        <p>{{item.content}}</p>\n                        <el-tag type=\"info\" style=\"text-align: right\">{{item.createTime | formatDate}}</el-tag>\n                    </el-card>\n                </el-collapse-item>\n            </el-collapse>\n        </el-col>\n    </el-row>\n    </div>\n</template>\n\n<script>\n    import { formatDate } from '../store/formatDate'\n    export default {\n        name: \"ProductPage\",\n        filters: {\n            formatDate(time) {\n                let date = new Date(time);\n                return formatDate(date, 'yyyy-MM-dd hh:mm');\n            }\n        },\n        data(){\n            return{\n                uri:'product',\n                bean:[],\n                review:[],\n                num: 1,\n                activeNames: ['1']\n            }\n        },\n        created() {\n            let id = this.$route.query.id;\n            let url = this.uri + \"/\" + id;\n            this.axios.get(url)\n                .then(response => {\n                    let result = response.data;\n                    this.bean = result.data.product;\n                    this.review = result.data.reviews;\n                    }\n                )\n        },\n        methods:{\n            handleBuy(){\n                if (!sessionStorage.getItem('user')){\n                    this.$router.push('/login');\n                }else{\n                    let pid = this.bean.id;\n                    let url = \"buy?pid=\" + pid + \"&num=\" + this.num;\n                    this.axios.get(url)\n                        .then(response => {\n                            let oiid = response.data;\n                            this.$router.push({\n                                path: '/confirm',\n                                query:{\n                                    oiid: oiid\n                                }\n                            })\n                        })\n\n                }\n            },\n            handleAdd(){\n                if (!sessionStorage.getItem('user')){\n                    this.$router.push('/login');\n                }\n                let pid = this.bean.id;\n                let url = \"addCart?pid=\" + pid + \"&num=\" + this.num;\n                this.axios.get(url)\n                    .then(response => {\n                        let result= response.data;\n                        if(200==result.code) {\n                            this.$message('已加入购物车');\n                        }\n                        })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"]}]}