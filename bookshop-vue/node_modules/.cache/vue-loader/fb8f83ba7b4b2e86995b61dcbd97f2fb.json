{"remainingRequest":"/Volumes/Application/bookshop/bookshop-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Application/bookshop/bookshop-vue/src/fore/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Application/bookshop/bookshop-vue/src/fore/Login.vue","mtime":1664395825116},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6IkxvZ2luIiwKICAgIGRhdGEoKXsKICAgICAgICBjb25zdCBjaGVja05hbWUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ+eUqOaIt+WQjeS4jeiDveS4uuepuicpKTsKICAgICAgICAgICAgfSBlbHNlewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgY29uc3QgdmFsaWRhdGVQYXNzID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeWvhueggScpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZXIucmVwZWF0UGFzc3dvcmQgIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZUZpZWxkKCdjaGVja1Bhc3MnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHVyaToibG9naW4iLAogICAgICAgICAgICB1c2VyOiB7CiAgICAgICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICAgICAgICAgIHJlcGVhdFBhc3N3b3JkOicnLAogICAgICAgICAgICB9LAogICAgICAgICAgICBjaGVja2VkOiBmYWxzZSwKICAgICAgICAgICAgcnVsZXM6ewogICAgICAgICAgICAgICAgbmFtZTpbCiAgICAgICAgICAgICAgICAgICAge3ZhbGlkYXRvcjpjaGVja05hbWUsdHJpZ2dlcjonYmx1cid9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6WwogICAgICAgICAgICAgICAgICAgIHt2YWxpZGF0b3I6dmFsaWRhdGVQYXNzLHRyaWdnZXI6J2JsdXInfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBoYW5kbGVMb2dpbigpIHsKICAgICAgICAgICAgdGhpcy4kcmVmc1sndXNlciddLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5heGlvcy5wb3N0KHRoaXMudXJpLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6dGhpcy51c2VyLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOnRoaXMudXNlci5wYXNzd29yZAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5jb2RlID09PSAyMDApewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXInLHRoaXMudXNlci5uYW1lKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKCfnmbvlvZXmiJDlip/vvIEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kYWxlcnQoJ+i0puWPt+aIluWvhueggemUmeivrycsJ2luZm8nLHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6J29rJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmc1snZm9ybSddLnJlc2V0RmllbGRzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQp9Owo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/fore","sourcesContent":["<template>\n    <div>\n        <el-form :model=\"user\"\n                 ref=\"user\"\n                 rules=\"rules\"\n                 label-position=\"left\"\n                 label-width=\"0px\"\n                 class=\"page\">\n            <h3 class=\"title\">用户登录</h3>\n            <el-form-item prop=\"username\">\n                <el-input type=\"text\"\n                          v-model=\"user.name\"\n                          auto-complete=\"off\"\n                          placeholder=\"请输入用户名\"\n                />\n            </el-form-item>\n            <el-form-item prop=\"password\">\n                <el-input type=\"password\"\n                          v-model=\"user.password\"\n                          auto-complete=\"off\"\n                          placeholder=\"请输入密码\"\n                />\n            </el-form-item>\n            <el-checkbox\n                    v-model=\"checked\"\n            >记住密码</el-checkbox>\n            <el-form-item style=\"width:100%;\">\n                <el-button type=\"primary\" style=\"width:100%;\" @click=\"handleLogin\">登录</el-button>\n            </el-form-item>\n            <el-form-item><el-button type=\"text\" @click=\"$router.push('/register')\">还没有账号？点击去注册</el-button> </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\n    export default {\n        name:\"Login\",\n        data(){\n            const checkName = (rule, value, callback) => {\n                if (!value) {\n                    return callback(new Error('用户名不能为空'));\n                } else{\n                    callback();\n                }\n            };\n            const validatePass = (rule, value, callback) => {\n                if (value === '') {\n                    callback(new Error('请输入密码'));\n                } else {\n                    if (this.user.repeatPassword !== '') {\n                        this.$refs.ruleForm.validateField('checkPass');\n                    }\n                    callback();\n                }\n            };\n            return {\n                uri:\"login\",\n                user: {\n                    name: '',\n                    password: '',\n                    repeatPassword:'',\n                },\n                checked: false,\n                rules:{\n                    name:[\n                        {validator:checkName,trigger:'blur'}\n                    ],\n                    password:[\n                        {validator:validatePass,trigger:'blur'}\n                    ]\n                }\n            }\n        },\n        methods: {\n            handleLogin() {\n                this.$refs['user'].validate((valid) => {\n                    if (valid) {\n                        this.axios.post(this.uri, {\n                            name:this.user.name,\n                            password:this.user.password\n                        })\n                            .then(response =>{\n                                if(response.data.code === 200){\n                                    sessionStorage.setItem('user',this.user.name);\n                                    this.$message('登录成功！');\n                                    this.$router.push('/');\n                                }else{\n                                    this.$alert('账号或密码错误','info',{\n                                        confirmButtonText:'ok'\n                                    })\n                                    this.$refs['form'].resetFields();\n                                }\n                            })\n                    } else {\n                        return false;\n                    }\n                });\n            }\n        }\n    };\n</script>\n\n<style scoped>\n    .page {\n        -webkit-border-radius: 5px;\n        border-radius: 5px;\n        margin: 180px auto;\n        width: 350px;\n        padding: 35px 35px 15px;\n        background: #fff;\n        border: 1px solid #eaeaea;\n        box-shadow: 0 0 25px #cac6c6;\n    }\n    label.el-checkbox {\n        margin: 0px 0px 15px;\n        text-align: left;\n    }\n</style>"]}]}