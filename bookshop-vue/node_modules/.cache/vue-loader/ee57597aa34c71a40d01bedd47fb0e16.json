{"remainingRequest":"/Volumes/Application/bookshop/bookshop-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Application/bookshop/bookshop-vue/src/fore/Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Application/bookshop/bookshop-vue/src/fore/Register.vue","mtime":1664406073493},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Application/bookshop/bookshop-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6IlJlZ2lzdGVyIiwKICAgIGRhdGEoKXsKICAgICAgICBjb25zdCBjaGVja05hbWUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ+eUqOaIt+WQjeS4jeiDveS4uuepuicpKTsKICAgICAgICAgICAgfSBlbHNlewogICAgICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgY29uc3QgdmFsaWRhdGVQYXNzID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+i+k+WFpeWvhueggScpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZXIucmVwZWF0UGFzc3dvcmQgIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZUZpZWxkKCdjaGVja1Bhc3MnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGNvbnN0IHZhbGlkYXRlUGFzczIgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35YaN5qyh6L6T5YWl5a+G56CBJykpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSB0aGlzLnVzZXIucGFzc3dvcmQpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5Lik5qyh6L6T5YWl5a+G56CB5LiN5LiA6Ie0IScpKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHVyaToicmVnaXN0ZXIiLAogICAgICAgICAgICB1c2VyOiB7CiAgICAgICAgICAgICAgICBuYW1lOiAnJywKICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICAgICAgICAgIHJlcGVhdFBhc3N3b3JkOicnLAogICAgICAgICAgICB9LAogICAgICAgICAgICBjaGVja2VkOiBmYWxzZSwKICAgICAgICAgICAgcnVsZXM6ewogICAgICAgICAgICAgICAgbmFtZTpbCiAgICAgICAgICAgICAgICAgICAge3ZhbGlkYXRvcjpjaGVja05hbWUsdHJpZ2dlcjonYmx1cid9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6WwogICAgICAgICAgICAgICAgICAgIHt2YWxpZGF0b3I6dmFsaWRhdGVQYXNzLHRyaWdnZXI6J2JsdXInfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIHJlcGVhdFBhc3N3b3JkOlsKICAgICAgICAgICAgICAgICAgICB7dmFsaWRhdG9yOnZhbGlkYXRlUGFzczIsdHJpZ2dlcjonYmx1cid9CiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGhhbmRsZVJlZ2lzdHJ5KCkgewogICAgICAgICAgICB0aGlzLiRyZWZzWyd1c2VyJ10udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QodGhpcy51cmksewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOnRoaXMudXNlci5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDp0aGlzLnVzZXIucGFzc3dvcmQKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMjAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKCfms6jlhozmiJDlip/vvIEnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRhbGVydCgn55So5oi35ZCN5bey6KKr5Y2g55So77yM6K+36YeN5paw5rOo5YaMJywnaW5mbycsewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDonb2snCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzWydmb3JtJ10ucmVzZXRGaWVsZHMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/fore","sourcesContent":["<template>\n    <div>\n        <el-form :model=\"user\"\n                 ref=\"user\"\n                 rules=\"rules\"\n                 label-position=\"left\"\n                 label-width=\"0px\"\n                 class=\"page\">\n            <h3 class=\"title\">用户注册</h3>\n            <el-form-item prop=\"username\">\n                <el-input type=\"text\"\n                          v-model=\"user.name\"\n                          auto-complete=\"off\"\n                          placeholder=\"请输入用户名\"\n                />\n                <el-input pel-input type=\"password\"\n                          v-model=\"user.password\"\n                          auto-complete=\"off\"\n                          placeholder=\"请输入密码\"\n                />\n            </el-form-item>\n            <el-form-item prop=\"password\">\n                <el-input type=\"password\"\n                          v-model=\"user.repeatPassword\"\n                          auto-complete=\"off\"\n                          placeholder=\"密码确认\"\n                />\n            </el-form-item>\n            <el-checkbox\n                    v-model=\"checked\"\n            >记住密码</el-checkbox>\n            <el-form-item style=\"width:100%;\">\n                <el-button type=\"primary\" style=\"width:100%;\" @click=\"handleRegistry\">注册</el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\n    export default {\n        name:\"Register\",\n        data(){\n            const checkName = (rule, value, callback) => {\n                if (!value) {\n                    return callback(new Error('用户名不能为空'));\n                } else{\n                    callback();\n                }\n            };\n            const validatePass = (rule, value, callback) => {\n                if (value === '') {\n                    callback(new Error('请输入密码'));\n                } else {\n                    if (this.user.repeatPassword !== '') {\n                        this.$refs.ruleForm.validateField('checkPass');\n                    }\n                    callback();\n                }\n            };\n            const validatePass2 = (rule, value, callback) => {\n                if (value === '') {\n                    callback(new Error('请再次输入密码'));\n                } else if (value !== this.user.password) {\n                    callback(new Error('两次输入密码不一致!'));\n                } else {\n                    callback();\n                }\n            };\n            return {\n                uri:\"register\",\n                user: {\n                    name: '',\n                    password: '',\n                    repeatPassword:'',\n                },\n                checked: false,\n                rules:{\n                    name:[\n                        {validator:checkName,trigger:'blur'}\n                    ],\n                    password:[\n                        {validator:validatePass,trigger:'blur'}\n                    ],\n                    repeatPassword:[\n                        {validator:validatePass2,trigger:'blur'}\n                    ]\n                }\n            }\n        },\n        methods: {\n            handleRegistry() {\n                this.$refs['user'].validate((valid) => {\n                    if (valid) {\n                        this.axios.post(this.uri,{\n                            name:this.user.name,\n                            password:this.user.password\n                        })\n                            .then(response =>{\n                                if(response.data.code === 200){\n                                    this.$message('注册成功！');\n                                    this.$router.push('/login');\n                                }else{\n                                    this.$alert('用户名已被占用，请重新注册','info',{\n                                        confirmButtonText:'ok'\n                                    })\n                                    this.$refs['form'].resetFields();\n                                }\n                            })\n                    } else {\n                        return false;\n                    }\n                });\n            }\n        }\n    };\n</script>\n\n<style scoped>\n    .page {\n        -webkit-border-radius: 5px;\n        border-radius: 5px;\n        margin: 180px auto;\n        width: 350px;\n        padding: 35px 35px 15px;\n        background: #fff;\n        border: 1px solid #eaeaea;\n        box-shadow: 0 0 25px #cac6c6;\n    }\n    label.el-checkbox {\n        margin: 0px 0px 15px;\n        text-align: left;\n    }\n</style>"]}]}